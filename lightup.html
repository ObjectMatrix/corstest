<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <title>IoT: ESP32/ESP8266</title>

    <link rel="stylesheet" href="">
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>
  <h1>ESP32</h1>
  </body>
  <script>
    function toggle(val) {
    let hydra = new Headers()
    hydra.append('Content-Type', 'application/json');
    hydra.append('Access-Control-Allow-Origin', '*');
    hydra.append('message', '0');
    let init = {
      mode: 'cors',
      cache: 'default', 
      method: 'POST',
      headers: hydra,
      message: val,
    }
    let myRequest = new Request('https://qf87lx85a7.execute-api.us-east-1.amazonaws.com/test/esp32', init);

    fetch(myRequest)
    .then(function(response) {
      console.log(response.type);
      console.log(response.url);
      console.log(response.status);
      console.log(response.ok);
      console.log(response.statusText);
      console.log(response.headers);
      if (!response.ok) {
        throw new Error("HTTP error, status = " + response.status);
      }
    })
    .catch(function(error) {
      let p = document.createElement('p');
      p.appendChild(
        document.createTextNode('Error: ' + error.message)
      );
    });
  }
  </script>
</html>